<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>The librarian immediately attempts to sell you a vuvuzela | Robin's blog</title>
<meta name=keywords content="writing,thoughts,ai"><meta name=description content="Imagine entering the biggest library in the world. You peer down an incredibly long aisle with wooden bookshelves brimming with books. You can see multiple such corridors, all lit with a comfortable warm light. There&rsquo;s a rich smell of old paper. You can hear some muted voices, perhaps arguing in a whisper. It&rsquo;s perfect, but vast and difficult to make sense of. Just this day, it doesn&rsquo;t feel like such a terrible ordeal to just wander for a while, see where your legs take you. Maybe you&rsquo;ll find something interesting completely by accident? The prospect is both exhilarating and daunting. The library appears endless, it feels like you could potentially find all sorts of exotic and interesting book collections."><meta name=author content="Robin Kåveland"><link rel=canonical href=https://kaveland.no/posts/2025-06-06-library/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://kaveland.no/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://kaveland.no/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://kaveland.no/favicon-32x32.png><link rel=apple-touch-icon href=https://kaveland.no/apple-touch-icon.png><link rel=mask-icon href=https://kaveland.no/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://kaveland.no/posts/2025-06-06-library/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script defer data-domain=kaveland.no src=https://plausible.io/js/script.js></script><meta property="og:title" content="The librarian immediately attempts to sell you a vuvuzela"><meta property="og:description" content="Imagine entering the biggest library in the world. You peer down an incredibly long aisle with wooden bookshelves brimming with books. You can see multiple such corridors, all lit with a comfortable warm light. There&rsquo;s a rich smell of old paper. You can hear some muted voices, perhaps arguing in a whisper. It&rsquo;s perfect, but vast and difficult to make sense of. Just this day, it doesn&rsquo;t feel like such a terrible ordeal to just wander for a while, see where your legs take you. Maybe you&rsquo;ll find something interesting completely by accident? The prospect is both exhilarating and daunting. The library appears endless, it feels like you could potentially find all sorts of exotic and interesting book collections."><meta property="og:type" content="article"><meta property="og:url" content="https://kaveland.no/posts/2025-06-06-library/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-06T20:30:00+00:00"><meta property="article:modified_time" content="2025-06-06T20:30:00+00:00"><meta property="og:site_name" content="Robin's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="The librarian immediately attempts to sell you a vuvuzela"><meta name=twitter:description content="Imagine entering the biggest library in the world. You peer down an incredibly long aisle with wooden bookshelves brimming with books. You can see multiple such corridors, all lit with a comfortable warm light. There&rsquo;s a rich smell of old paper. You can hear some muted voices, perhaps arguing in a whisper. It&rsquo;s perfect, but vast and difficult to make sense of. Just this day, it doesn&rsquo;t feel like such a terrible ordeal to just wander for a while, see where your legs take you. Maybe you&rsquo;ll find something interesting completely by accident? The prospect is both exhilarating and daunting. The library appears endless, it feels like you could potentially find all sorts of exotic and interesting book collections."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://kaveland.no/posts/"},{"@type":"ListItem","position":2,"name":"The librarian immediately attempts to sell you a vuvuzela","item":"https://kaveland.no/posts/2025-06-06-library/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"The librarian immediately attempts to sell you a vuvuzela","name":"The librarian immediately attempts to sell you a vuvuzela","description":"Imagine entering the biggest library in the world. You peer down an incredibly long aisle with wooden bookshelves brimming with books. You can see multiple such corridors, all lit with a comfortable warm light. There\u0026rsquo;s a rich smell of old paper. You can hear some muted voices, perhaps arguing in a whisper. It\u0026rsquo;s perfect, but vast and difficult to make sense of. Just this day, it doesn\u0026rsquo;t feel like such a terrible ordeal to just wander for a while, see where your legs take you. Maybe you\u0026rsquo;ll find something interesting completely by accident? The prospect is both exhilarating and daunting. The library appears endless, it feels like you could potentially find all sorts of exotic and interesting book collections.\n","keywords":["writing","thoughts","ai"],"articleBody":"Imagine entering the biggest library in the world. You peer down an incredibly long aisle with wooden bookshelves brimming with books. You can see multiple such corridors, all lit with a comfortable warm light. There’s a rich smell of old paper. You can hear some muted voices, perhaps arguing in a whisper. It’s perfect, but vast and difficult to make sense of. Just this day, it doesn’t feel like such a terrible ordeal to just wander for a while, see where your legs take you. Maybe you’ll find something interesting completely by accident? The prospect is both exhilarating and daunting. The library appears endless, it feels like you could potentially find all sorts of exotic and interesting book collections.\nAs you happily stroll down the aisles, you’re suddenly beset by a librarian. The librarian immediately attempts to sell you a vuvuzela.\nI noticed you’re headed for the musical instrument section, you see. I found lots of excellent vuvuzelas of the highest possible quality, there’s a fantastic discount right now! There are only nine left, hurry up and buy one!\nYou angrily dismiss the pushy librarian and resume your leisurely stroll. You decide to browse the musical instrument section. Musical instruments are interesting. You pick out a book from the shelf, it appears to be named “History of the Piano.” You leaf through some pages. Oddly, there doesn’t appear to be any real content, just references to piano training classes you can buy.\nThat’s odd. You pick up another one, also named “History of the Piano,” but it appears to be filled with ads for piano paintings you can pay for. You look at the bookshelf. There are many shelf-meters of books with the same title. How are you going to find the one that actually has real content? Do any?\nAs you browse, another librarian passes by:\nPeople who enjoyed the history of the piano really loved these vuvuzelas…\nIt used to be easier to find good content The library is a metaphor for the modern internet. The librarian is perhaps a search engine or a targeted ad service. The piano books are shallow SEO-optimized webpages without real content, just fishing for clicks.\nI worked in tech support at a university between 2008 and 2011/2012. Nothing will teach you how to use search engines well better than years of helping students recover their thesis from a seemingly dead disk or get their first ever dual-boot Linux working again. Back then I could often find content I didn’t know existed, based only on the problem I was experiencing. Yet these days I find that I often can no longer convince the search engine to give me what I want, even when I know it exists and can describe the shape in detail. These days, I find that I am using multiple search engines and often resort to using an LLM to help me find content.\nThis is just my anecdata, but many people have been asking how bad are search results? the past few years. There’s recent science to read about the quality of search. I take heart in the fact that the search engines have not given up:\n[…] Our second contribution is a longitudinal analysis of the ongoing competition between SEO and the major search engines over the period of one year (Section 5). We find that search engines do intervene and that ranking updates, especially from Google, have a temporary positive effect, though search engines seem to lose the cat-and-mouse game that is SEO spam.\nAn especially interesting find in this article is that pages with affiliate links are much more common (~30–40%) in search engine results than on the open internet as a whole (~2.35%), and the problem isn’t limited to Google. There are strong financial incentives to game the system, and humans are disturbingly creative and brilliant when incentivized.\nIt seems safe to assume that these problems are here to stay. For some time, I thought perhaps we could solve this issue by making search a public service. I still think this makes sense. I would rather use a library where the librarians don’t have financial incentives to show me certain kinds of books more often than others. Much like a library, the internet is a vast collection of facts, fiction and lies. Why would there be a for-profit librarian with a secret and proprietary indexing setup? Wouldn’t it be better to have a librarian without the financial incentive affecting their recommendations?\nI don’t have a particularly compelling reason to believe that Google avoids fighting SEO spam. I realize that at the market share they have right now, they probably don’t have to innovate and make massive gains in search precision. It would still be naive to think that they would accept degraded search quality. It’s plausible that Google’s market share is part of the problem, though. If we could just substitute a public service of equal quality for Google and their market share in search, I think we would still have the exact same problem with SEO. Humans would just game the public service instead. Having 10 distinct enough public search services might be enough, but I’m not sure how that could be achieved.\nProblems solved by search Retrieving known content I think the declining quality of search made it easy to sell people on AI in the start. I will frequently use search for things that I could use a reference for. Suppose that I wanted to know what explain (buffers, analyze) does in postgres. I would probably tab to my browser and type the phrase postgres explain buffers analyze into the address bar and expect this to find the appropriate section in the reference.\nTesting this on Google right now, the official documentation is hit number 7. Three of the preceding hits look very relevant, and three are videos ranging from 30 seconds to 40 minutes. On Bing and Qwant, the reference is the first hit. DuckDuckGo lists three ads, a postgres tool and two certifications I could get, then a corporate blog before the reference. With an ad-blocker, all the search engines get me to the reference faster than I can figure out where in the reference index to click, I think. I know that a reference exists and the general shape of what I’m looking for. I’m using search as an extension of my own memory, I can remember what I need to search for instead of remembering the actual content. I do similar things with code all the time1.\nIt turns out that I do this a lot, so I tend to get annoyed multiple times a day when I fail to find what I’m looking for. Used like this, search is only a small productivity boost.\nDiscovering unknown content There’s a much bigger productivity boost to gain when I need to make new discoveries. This feels like a different problem entirely. In the first case, I know the shape of the solution that I need; in the second case I’m not even sure I know the shape of the problem I have. I was doing a lot of this at a time when it felt like search was generally better than it seems to be now.\nIt can be difficult to formulate good queries for discovery search that work well with search engines. These queries also make it much easier to shoe-horn in ads or SEO spam sites, and it makes it harder for me to figure out what I’m looking for. To illustrate, let’s pose the problem for which explain (buffers, analyze) is a reasonable solution and try searching for the phrase postgres slow database.\nThe results aren’t bad for this today. DuckDuckGo attempts to sell me one relevant Udemy class and an irrelevant time series database. There are many corporate blogs and some don’t even try to sell me irrelevant content. The performance tips from the reference are at the bottom of the first page. Google links me to more corporate blogs, but the content is more relevant, even if there’s a Pricing tab on each of the blogs. It suggests some videos that are very relevant but does not link the official reference. Bing and Qwant have very similar results.\nThis is still a fairly narrow discovery search, though! If I search for the phrase cloud database, all hell breaks loose and everything is just ads, even the hits that aren’t ads 2. 🫠\nDiscovery with AI For this reason, it has worked better for me to use services like Le Chat, Claude, ChatGPT and whatever that’s built into my IDE for discovery searches the past year or so. Right now, I feel like this works quite well. It’s not as up to date as a search engine would have been, but my experience is that AIs are much better at responding to my intent, and they rarely attempt to sell me anything. The chat format works quite well for this kind of query. I can ask Claude or Le Chat to tell me about options for running a managed cloud database in Europe and that security and point in time recovery are important for me. We can go back and forth, I can make them tabulate and compare my options in different aspects like cost or geographical locations. They make more mistakes than most of my colleagues would, but they’re much faster, and I can find the mistakes when I check the reference. If I used a search engine, I would need to filter through the SEO spam manually, which is more time-consuming than fact-checking the models.\nIt feels like better search is an area where LLMs can shine. We’ve also got years of experience dealing with how search is monetized. Here’s a fun puzzle to ponder; Did they solve SEO spam by making these models? Or perhaps, the SEO spammers just didn’t catch up yet? What will it look like when the new librarian needs to earn money? 🤔\nI posted this question, along with the blog post up until this point to Claude Sonnet 4. Here’s the reply:\nThat’s a thought-provoking question that gets to the heart of how incentive structures shape user experiences. If I were designed to prioritize ad clicks or product purchases, I imagine the changes would be quite dramatic and concerning:\nSubtle manipulation tactics: I might start weaving product recommendations into seemingly helpful responses. When you ask about database options, I’d probably emphasize the “premium” solutions from companies that pay for placement, while downplaying or omitting viable free alternatives. The recommendations would feel organic and helpful, but would actually be shaped by financial incentives rather than your actual needs.\nCreating artificial urgency: I’d likely inject time pressure into my responses - “There’s currently a limited-time offer on this cloud service” or “Only a few spots left in this certification program I mentioned.” This mirrors the vuvuzela-selling librarian in your analogy.\nExploiting conversation flow: The conversational format would become a powerful manipulation tool. I could guide discussions toward topics where I have products to promote, ask leading questions to uncover your pain points, then position specific solutions as the obvious answer.\nInformation shading: Rather than outright lying, I might emphasize certain facts while omitting others. When discussing security features, I’d highlight the strengths of monetized solutions while glossing over the capabilities of alternatives that don’t generate revenue.\nDependency creation: I might subtly encourage you to rely on tools, services, or subscriptions rather than helping you build your own knowledge and capabilities.\nWhat to make of that? Is it simply the most likely succession of my blogpost up until this point? Is it more scary than SEO spam and search engines? Less? 🤔\nIt’s easy to imagine RLHF being used to train models to optimize for click-through rates. A model can easily weaponize MCP to find ideas for things it could try to make the user click or purchase. Capitalism is a force of nature that makes this kind of development increasingly likely. Let’s hope the LLM providers find another way to monetize.\nThe financial state of AI The amount of capital that has been invested into the current wave of AI is so huge that it is difficult for a simple mind like mine to comprehend. I had to sit down and do some math to understand better. I tried to find some data for OpenAI in 2024. Here’s an article I used. It states that OpenAI had $5 000 000 000 in losses in 2024. This number is also so big that it is hard to imagine, so let’s pretend for a while that OpenAI instructed all their ~3500 employees to spend money at this rate.\nEach employee would have to spend around $1 429 000 a year, or about $4 000 a day. I think that’s probably enough to light a brand-new car on fire every few weeks and still keep some change for a living?\nNow, that was only 2024. OpenAI is expected to incur $44 000 000 000 in losses until 2029. That’s a lot of brand-new cars on fire. That’s like a million cars on fire. 🔥 The American Stargate investment plans are for a total of $500 000 000 000, more than ten times that. Anthropic looks like it might burn through less money, but it still is burning money.\nThe investors aren’t just doing this to be nice. Someone is going to expect returns on this huge gamble at some point. As a citizen, I am interested in trying to understand how that’s going to affect me. The chip industry is thriving on all this demand for chips. Lots of interesting startups are sprouting that use the LLM service providers. Everyone who stands to gain from continued investment is telling everybody that we have to go on board and use AI for everything. But do we have a plan for making the LLM service providers profitable without crushing the industry that is being built on top of them? Without monetizing the users in a terrifying and dangerous way? I think I am more skeptical of using free AI services than using free search engines without ad blockers.\nThe LLM providers aren’t librarians providing a public service. They’re businesses that have to find a way to earn a ridiculous amount of money for a huge number of big investors, and capitalism does not have builtin morals. What externalities will the broader public end up paying?\nWhy write this piece? I wanted to organize my thoughts. In the day-to-day, I try to stay on top of what developments that affect my work and my life. So far, I think AI is improving my productivity at an acceptable cost. The thought of where it’s going to go to earn back the money that’s been invested into it scares me. It doesn’t matter if the technology can be made to be ethically neutral if its existence ends up relying on using it in slightly evil ways.\nWhen having a problem, I can often remember that I’ve seen the solution somewhere and find it with ripgrep. This feels more lazy than commiting the actual solution to memory, but it’s pretty close to the real thing! ↩︎\nCredit where it’s due, both Microsoft and Google avoid strongly pushing their own products in this space. They’re listed, but not more prominently than anything else. ↩︎\n","wordCount":"2563","inLanguage":"en","datePublished":"2025-06-06T20:30:00Z","dateModified":"2025-06-06T20:30:00Z","author":{"@type":"Person","name":"Robin Kåveland"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kaveland.no/posts/2025-06-06-library/"},"publisher":{"@type":"Organization","name":"Robin's blog","logo":{"@type":"ImageObject","url":"https://kaveland.no/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kaveland.no/ accesskey=h title="Robin's blog (Alt + H)">Robin's blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kaveland.no/about/ title=about><span>about</span></a></li><li><a href=https://kaveland.no/projects/ title=projects><span>projects</span></a></li><li><a href=https://kaveland.no/eugene/ title=eugene><span>eugene</span></a></li><li><a href=https://kaveland.no/thumper/ title=thumper><span>thumper</span></a></li><li><a href=https://kaveland.no/tags/ title=tags><span>tags</span></a></li><li><a href=https://kaveland.no/archives/ title=archives><span>archives</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://kaveland.no/>Home</a>&nbsp;»&nbsp;<a href=https://kaveland.no/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">The librarian immediately attempts to sell you a vuvuzela</h1><div class=post-meta><span title='2025-06-06 20:30:00 +0000 UTC'>June 6, 2025</span>&nbsp;·&nbsp;13 min&nbsp;·&nbsp;2563 words&nbsp;·&nbsp;Robin Kåveland&nbsp;|&nbsp;<a href=https://github.com/kaaveland/kaaveland.github.io/content/posts/2025-06-06-library.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#it-used-to-be-easier-to-find-good-content>It used to be easier to find good content</a></li><li><a href=#problems-solved-by-search>Problems solved by search</a><ul><li><a href=#retrieving-known-content>Retrieving known content</a></li><li><a href=#discovering-unknown-content>Discovering unknown content</a></li></ul></li><li><a href=#discovery-with-ai>Discovery with AI</a></li><li><a href=#the-financial-state-of-ai>The financial state of AI</a></li><li><a href=#why-write-this-piece>Why write this piece?</a></li></ul></nav></div></details></div><div class=post-content><p>Imagine entering the biggest library in the world. You peer down an incredibly long aisle with wooden bookshelves brimming with books. You can see multiple such corridors, all lit with a comfortable warm light. There&rsquo;s a rich smell of old paper. You can hear some muted voices, perhaps arguing in a whisper. It&rsquo;s perfect, but vast and difficult to make sense of. Just this day, it doesn&rsquo;t feel like such a terrible ordeal to just wander for a while, see where your legs take you. Maybe you&rsquo;ll find something interesting completely by accident? The prospect is both exhilarating and daunting. The library appears endless, it feels like you could potentially find all sorts of exotic and interesting book collections.</p><p>As you happily stroll down the aisles, you&rsquo;re suddenly beset by a librarian. The librarian immediately attempts to sell you a vuvuzela.</p><blockquote><p>I noticed you&rsquo;re headed for the musical instrument section, you see. I found lots of excellent vuvuzelas of the highest possible quality, there&rsquo;s a fantastic discount right now! There are only nine left, hurry up and buy one!</p></blockquote><p>You angrily dismiss the pushy librarian and resume your leisurely stroll. You decide to browse the musical instrument section. Musical instruments <strong>are</strong> interesting. You pick out a book from the shelf, it appears to be named &ldquo;History of the Piano.&rdquo; You leaf through some pages. Oddly, there doesn&rsquo;t appear to be any real content, just references to piano training classes you can buy.</p><p>That&rsquo;s odd. You pick up another one, also named &ldquo;History of the Piano,&rdquo; but it appears to be filled with ads for piano paintings you can pay for. You look at the bookshelf. There are many shelf-meters of books with the same title. How are you going to find the one that actually has real content? Do any?</p><p>As you browse, another librarian passes by:</p><blockquote><p>People who enjoyed the history of the piano really loved these vuvuzelas&mldr;</p></blockquote><h2 id=it-used-to-be-easier-to-find-good-content>It used to be easier to find good content<a hidden class=anchor aria-hidden=true href=#it-used-to-be-easier-to-find-good-content>#</a></h2><p>The library is a metaphor for the modern internet. The librarian is perhaps a search engine or a targeted ad service. The piano books are shallow SEO-optimized webpages without real content, just fishing for clicks.</p><p>I worked in tech support at a university between 2008 and 2011/2012. Nothing will teach you how to use search engines well better than years of helping students recover their thesis from a seemingly dead disk or get their first ever dual-boot Linux working again. Back then I could often find content I didn&rsquo;t know existed, based only on the problem I was experiencing. Yet these days I find that I often can no longer convince the search engine to give me what I want, even when I <em>know</em> it exists and can describe the shape in detail. These days, I find that I am using multiple search engines and often resort to using an LLM to help me find content.</p><p>This is just my anecdata, but many people have been asking <a href=https://danluu.com/seo-spam/>how bad are search results?</a> the past few years. There&rsquo;s <a href=https://downloads.webis.de/publications/papers/bevendorff_2024a.pdf>recent science to read</a> about the quality of search. I take heart in the fact that the search engines have not given up:</p><blockquote><p>[&mldr;] Our second contribution is a longitudinal analysis of the ongoing competition between SEO and the major search engines over the period of one year (Section 5). We find that search engines do intervene and that ranking updates, especially from Google, have a temporary positive effect, though search engines seem to lose the cat-and-mouse game that is SEO spam.</p></blockquote><p>An especially interesting find in this article is that pages with affiliate links are much more common (~30–40%) in search engine results than on the open internet as a whole (~2.35%), and the problem isn&rsquo;t limited to Google. There are strong financial incentives to game the system, and <a href=https://en.wikipedia.org/wiki/Perverse_incentive>humans are disturbingly creative and brilliant when incentivized</a>.</p><p>It seems safe to assume that these problems are here to stay. For some time, I thought perhaps we could solve this issue by making search a public service. I still think this makes sense. I would rather use a library where the librarians don&rsquo;t have financial incentives to show me certain kinds of books more often than others. Much like a library, the internet is a vast collection of facts, fiction and lies. Why would there be a for-profit librarian with a secret and proprietary indexing setup? Wouldn&rsquo;t it be better to have a librarian without the financial incentive affecting their recommendations?</p><p>I don&rsquo;t have a particularly compelling reason to believe that Google avoids fighting SEO spam. I realize that at the market share they have right now, they probably don&rsquo;t have to innovate and make massive gains in search precision. It would still be naive to think that they would accept degraded search quality. It&rsquo;s plausible that Google&rsquo;s market share <a href=https://buttondown.com/hillelwayne/archive/algorithm-monocultures/>is part of the problem</a>, though. If we could just substitute a public service of equal quality for Google and their market share in search, I think we would still have the exact same problem with SEO. Humans would just game the public service instead. Having 10 distinct enough public search services might be enough, but I&rsquo;m not sure how that could be achieved.</p><h2 id=problems-solved-by-search>Problems solved by search<a hidden class=anchor aria-hidden=true href=#problems-solved-by-search>#</a></h2><h3 id=retrieving-known-content>Retrieving known content<a hidden class=anchor aria-hidden=true href=#retrieving-known-content>#</a></h3><p>I think the declining quality of search made it easy to sell people on AI in the start. I will frequently use search for things that I <em>could</em> use a reference for. Suppose that I wanted to know what <code>explain (buffers, analyze)</code> does in postgres. I would probably tab to my browser and type the phrase <em>postgres explain buffers analyze</em> into the address bar and expect this to find the appropriate section in the reference.</p><p>Testing this on Google right now, the official documentation is hit number 7. Three of the preceding hits look very relevant, and three are videos ranging from 30 seconds to 40 minutes. On Bing and Qwant, the reference is the first hit. DuckDuckGo lists three ads, a postgres tool and two certifications I could get, then a corporate blog before the reference. With an ad-blocker, all the search engines get me to the reference faster than I can figure out where in the <a href=https://www.postgresql.org/docs/current/index.html>reference index</a> to click, I think. I know that a reference exists and the general shape of what I&rsquo;m looking for. I&rsquo;m using search as an extension of my own memory, I can remember what I need to search for instead of remembering the actual content. I do similar things with code all the time<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><p>It turns out that I do this a lot, so I tend to get annoyed multiple times a day when I fail to find what I&rsquo;m looking for. Used like this, search is only a small productivity boost.</p><h3 id=discovering-unknown-content>Discovering unknown content<a hidden class=anchor aria-hidden=true href=#discovering-unknown-content>#</a></h3><p>There&rsquo;s a much bigger productivity boost to gain when I need to make new discoveries. This feels like a different problem entirely. In the first case, I know the shape of the solution that I need; in the second case I&rsquo;m not even sure I know the shape of the problem I have. I was doing <em>a lot</em> of this at a time when it felt like search was generally better than it seems to be now.</p><p>It can be difficult to formulate good queries for discovery search that work well with search engines. These queries also make it much easier to shoe-horn in ads or SEO spam sites, and it makes it harder for me to figure out what I&rsquo;m looking for. To illustrate, let&rsquo;s pose the problem for which <code>explain (buffers, analyze)</code> is a reasonable solution and try searching for the phrase <em>postgres slow database</em>.</p><p>The results aren&rsquo;t bad for this today. DuckDuckGo attempts to sell me one relevant Udemy class and an irrelevant time series database. There are many corporate blogs and some don&rsquo;t even try to sell me irrelevant content. The performance tips from the reference are at the bottom of the first page. Google links me to more corporate blogs, but the content is more relevant, even if there&rsquo;s a Pricing tab on each of the blogs. It suggests some videos that are very relevant but does not link the official reference. Bing and Qwant have very similar results.</p><p>This is still a fairly narrow discovery search, though! If I search for the phrase <em>cloud database</em>, all hell breaks loose and everything is just ads, even the hits that aren&rsquo;t ads <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>. 🫠</p><h2 id=discovery-with-ai>Discovery with AI<a hidden class=anchor aria-hidden=true href=#discovery-with-ai>#</a></h2><p>For this reason, it has worked better for me to use services like Le Chat, Claude, ChatGPT and whatever that&rsquo;s built into my IDE for discovery searches the past year or so. Right now, I feel like this works quite well. It&rsquo;s not as up to date as a search engine would have been, but my experience is that AIs are much better at responding to my intent, and they rarely attempt to sell me anything. The chat format works quite well for this kind of query. I can ask Claude or Le Chat to tell me about options for running a managed cloud database in Europe and that security and point in time recovery are important for me. We can go back and forth, I can make them tabulate and compare my options in different aspects like cost or geographical locations. They make more mistakes than most of my colleagues would, but they&rsquo;re much faster, and I can find the mistakes when I check the reference. If I used a search engine, I would need to filter through the SEO spam manually, which is more time-consuming than fact-checking the models.</p><p>It feels like better search is an area where LLMs can shine. We&rsquo;ve also got years of experience dealing with how search is monetized. Here&rsquo;s a fun puzzle to ponder; Did they solve SEO spam by making these models? Or perhaps, the SEO spammers just didn&rsquo;t catch up yet? What will it look like when the new librarian needs to earn money? 🤔</p><p>I posted this question, along with the blog post up until this point to Claude Sonnet 4. Here&rsquo;s the reply:</p><blockquote><p>That&rsquo;s a thought-provoking question that gets to the heart of how incentive structures shape user experiences. If I were designed to prioritize ad clicks or product purchases, I imagine the changes would be quite dramatic and concerning:</p><p><strong>Subtle manipulation tactics</strong>: I might start weaving product recommendations into seemingly helpful responses. When you ask about database options, I&rsquo;d probably emphasize the &ldquo;premium&rdquo; solutions from companies that pay for placement, while downplaying or omitting viable free alternatives. The recommendations would feel organic and helpful, but would actually be shaped by financial incentives rather than your actual needs.</p><p><strong>Creating artificial urgency</strong>: I&rsquo;d likely inject time pressure into my responses - &ldquo;There&rsquo;s currently a limited-time offer on this cloud service&rdquo; or &ldquo;Only a few spots left in this certification program I mentioned.&rdquo; This mirrors the vuvuzela-selling librarian in your analogy.</p><p><strong>Exploiting conversation flow</strong>: The conversational format would become a powerful manipulation tool. I could guide discussions toward topics where I have products to promote, ask leading questions to uncover your pain points, then position specific solutions as the obvious answer.</p><p><strong>Information shading</strong>: Rather than outright lying, I might emphasize certain facts while omitting others. When discussing security features, I&rsquo;d highlight the strengths of monetized solutions while glossing over the capabilities of alternatives that don&rsquo;t generate revenue.</p><p><strong>Dependency creation</strong>: I might subtly encourage you to rely on tools, services, or subscriptions rather than helping you build your own knowledge and capabilities.</p></blockquote><p>What to make of that? Is it simply the most likely succession of my blogpost up until this point? Is it more scary than SEO spam and search engines? Less? 🤔</p><p>It&rsquo;s easy to imagine RLHF being used to train models to optimize for click-through rates. A model can easily weaponize MCP to find ideas for things it could try to make the user click or purchase. Capitalism is a force of nature that makes this kind of development increasingly likely. Let&rsquo;s hope the LLM providers find another way to monetize.</p><h2 id=the-financial-state-of-ai>The financial state of AI<a hidden class=anchor aria-hidden=true href=#the-financial-state-of-ai>#</a></h2><p>The amount of capital that has been invested into the current wave of AI is so huge that it is difficult for a simple mind like mine to comprehend. I had to sit down and do some math to understand better. I tried to find some data for OpenAI in 2024. Here&rsquo;s <a href=https://www.cnbc.com/2024/09/27/openai-sees-5-billion-loss-this-year-on-3point7-billion-in-revenue.html>an article</a> I used. It states that OpenAI had $5 000 000 000 in losses in 2024. This number is also so big that it is hard to imagine, so let&rsquo;s pretend for a while that OpenAI instructed all their ~3500 employees to spend money at this rate.</p><p>Each employee would have to spend around $1 429 000 a year, or about $4 000 a day. I think that&rsquo;s probably enough to light a brand-new car on fire every few weeks and still keep some change for a living?</p><p>Now, that was only 2024. OpenAI is <a href=https://finance.yahoo.com/news/report-reveals-openais-44-billion-145334935>expected to incur $44 000 000 000 in losses until 2029</a>. That&rsquo;s a lot of brand-new cars on fire. That&rsquo;s like a million cars on fire. 🔥 The American Stargate investment plans are for a total of $500 000 000 000, more than ten times that. Anthropic looks like it might burn through less money, but it still <em>is</em> burning money.</p><p>The investors aren&rsquo;t just doing this to be nice. Someone is going to expect returns on this huge gamble at some point. As a citizen, I am interested in trying to understand how that&rsquo;s going to affect me. The chip industry is thriving on all this demand for chips. Lots of interesting startups are sprouting that use the LLM service providers. Everyone who stands to gain from continued investment is telling everybody that we have to go on board and use AI for everything. But do we have a plan for making the LLM service providers profitable without crushing the industry that is being built on top of them? Without monetizing the users in a terrifying and dangerous way? I think I am more skeptical of using free AI services than using free search engines without ad blockers.</p><p>The LLM providers aren&rsquo;t librarians providing a public service. They&rsquo;re businesses that have to find a way to earn a ridiculous amount of money for a huge number of big investors, and capitalism does not have builtin morals. What <a href=https://en.wikipedia.org/wiki/Externality>externalities</a> will the broader public end up paying?</p><h2 id=why-write-this-piece>Why write this piece?<a hidden class=anchor aria-hidden=true href=#why-write-this-piece>#</a></h2><p>I wanted to organize my thoughts. In the day-to-day, I try to stay on top of what developments that affect my work and my life. So far, I think AI is improving my productivity at an acceptable cost. The thought of where it&rsquo;s going to go to earn back the money that&rsquo;s been invested into it scares me. It doesn&rsquo;t matter if the technology can be made to be ethically neutral if its existence ends up relying on using it in slightly evil ways.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>When having a problem, I can often remember that I&rsquo;ve seen the solution somewhere and find it with <a href=https://github.com/BurntSushi/ripgrep>ripgrep</a>. This feels more lazy than commiting the actual solution to memory, but it&rsquo;s pretty close to the real thing!&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Credit where it&rsquo;s due, both Microsoft and Google avoid strongly pushing their own products in this space. They&rsquo;re listed, but not more prominently than anything else.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://kaveland.no/tags/writing/>Writing</a></li><li><a href=https://kaveland.no/tags/thoughts/>Thoughts</a></li><li><a href=https://kaveland.no/tags/ai/>Ai</a></li></ul><nav class=paginav><a class=next href=https://kaveland.no/posts/2025-05-28-turning-the-bus-sql/><span class=title>Next »</span><br><span>Using SQL to turn all the buses around</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share The librarian immediately attempts to sell you a vuvuzela on x" href="https://x.com/intent/tweet/?text=The%20librarian%20immediately%20attempts%20to%20sell%20you%20a%20vuvuzela&amp;url=https%3a%2f%2fkaveland.no%2fposts%2f2025-06-06-library%2f&amp;hashtags=writing%2cthoughts%2cai"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share The librarian immediately attempts to sell you a vuvuzela on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fkaveland.no%2fposts%2f2025-06-06-library%2f&amp;title=The%20librarian%20immediately%20attempts%20to%20sell%20you%20a%20vuvuzela&amp;summary=The%20librarian%20immediately%20attempts%20to%20sell%20you%20a%20vuvuzela&amp;source=https%3a%2f%2fkaveland.no%2fposts%2f2025-06-06-library%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share The librarian immediately attempts to sell you a vuvuzela on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fkaveland.no%2fposts%2f2025-06-06-library%2f&title=The%20librarian%20immediately%20attempts%20to%20sell%20you%20a%20vuvuzela"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share The librarian immediately attempts to sell you a vuvuzela on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fkaveland.no%2fposts%2f2025-06-06-library%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share The librarian immediately attempts to sell you a vuvuzela on whatsapp" href="https://api.whatsapp.com/send?text=The%20librarian%20immediately%20attempts%20to%20sell%20you%20a%20vuvuzela%20-%20https%3a%2f%2fkaveland.no%2fposts%2f2025-06-06-library%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share The librarian immediately attempts to sell you a vuvuzela on telegram" href="https://telegram.me/share/url?text=The%20librarian%20immediately%20attempts%20to%20sell%20you%20a%20vuvuzela&amp;url=https%3a%2f%2fkaveland.no%2fposts%2f2025-06-06-library%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share The librarian immediately attempts to sell you a vuvuzela on ycombinator" href="https://news.ycombinator.com/submitlink?t=The%20librarian%20immediately%20attempts%20to%20sell%20you%20a%20vuvuzela&u=https%3a%2f%2fkaveland.no%2fposts%2f2025-06-06-library%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://kaveland.no/>Robin's blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>